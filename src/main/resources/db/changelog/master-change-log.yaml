databaseChangeLog:
  - changeSet:
      id: 1
      author: DanielRua
      changes:
        - createTable:
            tableName: User
            columns:
              - column:
                  name: id
                  type: UUID
                  constraints:
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(100)
                  constraints:
                    nullable: false
              - column:
                  name: email
                  type: VARCHAR(200)
                  constraints:
                    nullable: false
              - column:
                  name: password
                  type: VARCHAR(100)
                  constraints:
                    nullable: false
              - column:
                  name: is_active
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: DATETIME
                  constraints:
                    nullable: false
              - column:
                  name: modified_at
                  type: DATETIME
              - column:
                  name: last_login
                  type: DATETIME
        - addPrimaryKey:
            columnNames: id
            constraintName: pk_user_id
            tableName: User
            validate: true
        - addUniqueConstraint:
            columnNames: email
            constraintName: user_email_uk
            tableName: User
  - changeSet:
      id: 2
      author: DanielRua
      changes:
        - createTable:
            tableName: Phone
            columns:
              - column:
                  name: id
                  type: UUID
                  constraints:
                    nullable: false
              - column:
                  name: user_id
                  type: UUID
                  constrains:
                    nullable: false
              - column:
                  name: number
                  type: VARCHAR(7)
                  constraints:
                    nullable: false
              - column:
                  name: city_code
                  type: VARCHAR(4)
                  constraints:
                    nullable: false
              - column:
                  name: country_code
                  type: VARCHAR(3)
                  constraints:
                    nullable: false
        - addPrimaryKey:
            columnNames: id
            constraintName: pk_phone
            tableName: Phone
        - addForeignKeyConstraint:
            baseColumnNames: user_id
            baseTableName: Phone
            constraintName: fk_phone_user
            referencedColumnNames: id
            referencedTableName: User
            validate: true
  - changeSet:
      id: 3
      author: DanielRua
      changes:
        - createTable:
          tableName: Tokens
          columns:
            - column:
                name: user_id
                type: UUID
                constraints:
                  nullable: false
            - column:
                name: token
                type: VARCHAR(250)
                constraints:
                  nullable: false
        - addPrimaryKey:
            columnNames: user_id, token
            constraintName: pk_token
            tableName: Tokens
        - addForeignKeyConstraint:
            baseColumnNames: user_id
            baseTableName: Tokens
            constraintName: fk_tokens_user
            referencedColumnNames: user_id
            referencedTableName: User
            validate: true
